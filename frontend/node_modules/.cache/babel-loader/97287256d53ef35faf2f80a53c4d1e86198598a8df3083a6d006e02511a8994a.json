{"ast":null,"code":"// src/utils/auth.js\nimport jwtDecode from 'jwt-decode';\n\n/*\r\n  NOTES:\r\n  - Backend must sign JWT with payload containing at least: { id, name, email, role }.\r\n  - Example server-side payload:\r\n      jwt.sign({ id: user.id, name: user.name, email: user.email, role: user.role }, JWT_SECRET)\r\n  - Frontend expects those fields from the token when calling getUserFromToken().\r\n*/\n\nexport function setToken(token) {\n  localStorage.setItem('fc_token', token);\n}\nexport function getToken() {\n  return localStorage.getItem('fc_token');\n}\nexport function removeToken() {\n  localStorage.removeItem('fc_token');\n}\nexport function getUserFromToken() {\n  const t = getToken();\n  if (!t) return null;\n  try {\n    // jwtDecode returns the decoded payload, for example:\n    // { id: 1, name: \"Alice\", email: \"...\", role: \"Farmer\", iat: ..., exp: ... }\n    return jwtDecode(t);\n  } catch (err) {\n    console.warn('Failed to decode token', err);\n    return null;\n  }\n}","map":{"version":3,"names":["jwtDecode","setToken","token","localStorage","setItem","getToken","getItem","removeToken","removeItem","getUserFromToken","t","err","console","warn"],"sources":["C:/Users/Gayani Gunasekara/Desktop/My_Projects/PureHarvest/frontend/src/utils/auth.js"],"sourcesContent":["// src/utils/auth.js\r\nimport jwtDecode from 'jwt-decode';\r\n\r\n/*\r\n  NOTES:\r\n  - Backend must sign JWT with payload containing at least: { id, name, email, role }.\r\n  - Example server-side payload:\r\n      jwt.sign({ id: user.id, name: user.name, email: user.email, role: user.role }, JWT_SECRET)\r\n  - Frontend expects those fields from the token when calling getUserFromToken().\r\n*/\r\n\r\nexport function setToken(token) {\r\n    localStorage.setItem('fc_token', token);\r\n}\r\n\r\nexport function getToken() {\r\n    return localStorage.getItem('fc_token');\r\n}\r\n\r\nexport function removeToken() {\r\n    localStorage.removeItem('fc_token');\r\n}\r\n\r\nexport function getUserFromToken() {\r\n    const t = getToken();\r\n    if (!t) return null;\r\n    try {\r\n        // jwtDecode returns the decoded payload, for example:\r\n        // { id: 1, name: \"Alice\", email: \"...\", role: \"Farmer\", iat: ..., exp: ... }\r\n        return jwtDecode(t);\r\n    } catch (err) {\r\n        console.warn('Failed to decode token', err);\r\n        return null;\r\n    }\r\n}\r\n"],"mappings":"AAAA;AACA,OAAOA,SAAS,MAAM,YAAY;;AAElC;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA,OAAO,SAASC,QAAQA,CAACC,KAAK,EAAE;EAC5BC,YAAY,CAACC,OAAO,CAAC,UAAU,EAAEF,KAAK,CAAC;AAC3C;AAEA,OAAO,SAASG,QAAQA,CAAA,EAAG;EACvB,OAAOF,YAAY,CAACG,OAAO,CAAC,UAAU,CAAC;AAC3C;AAEA,OAAO,SAASC,WAAWA,CAAA,EAAG;EAC1BJ,YAAY,CAACK,UAAU,CAAC,UAAU,CAAC;AACvC;AAEA,OAAO,SAASC,gBAAgBA,CAAA,EAAG;EAC/B,MAAMC,CAAC,GAAGL,QAAQ,CAAC,CAAC;EACpB,IAAI,CAACK,CAAC,EAAE,OAAO,IAAI;EACnB,IAAI;IACA;IACA;IACA,OAAOV,SAAS,CAACU,CAAC,CAAC;EACvB,CAAC,CAAC,OAAOC,GAAG,EAAE;IACVC,OAAO,CAACC,IAAI,CAAC,wBAAwB,EAAEF,GAAG,CAAC;IAC3C,OAAO,IAAI;EACf;AACJ","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}