{"ast":null,"code":"// src/utils/auth.js\nimport jwtDecode from 'jwt-decode';\nconst TOKEN_KEY = 'fc_token';\nexport function setToken(token) {\n  localStorage.setItem(TOKEN_KEY, token);\n}\nexport function getToken() {\n  return localStorage.getItem(TOKEN_KEY);\n}\nexport function removeToken() {\n  localStorage.removeItem(TOKEN_KEY);\n}\nexport function getUserFromToken() {\n  const t = getToken();\n  if (!t) return null;\n  try {\n    return jwtDecode(t); // { id, name, email, role, iat, exp }\n  } catch (err) {\n    console.warn('Failed to decode token', err);\n    return null;\n  }\n}","map":{"version":3,"names":["jwtDecode","TOKEN_KEY","setToken","token","localStorage","setItem","getToken","getItem","removeToken","removeItem","getUserFromToken","t","err","console","warn"],"sources":["C:/Users/Gayani Gunasekara/Desktop/My_Projects/PureHarvest/frontend/src/utils/auth.js"],"sourcesContent":["// src/utils/auth.js\r\nimport jwtDecode from 'jwt-decode';\r\n\r\nconst TOKEN_KEY = 'fc_token';\r\n\r\nexport function setToken(token) {\r\n    localStorage.setItem(TOKEN_KEY, token);\r\n}\r\n\r\nexport function getToken() {\r\n    return localStorage.getItem(TOKEN_KEY);\r\n}\r\n\r\nexport function removeToken() {\r\n    localStorage.removeItem(TOKEN_KEY);\r\n}\r\n\r\nexport function getUserFromToken() {\r\n    const t = getToken();\r\n    if (!t) return null;\r\n    try {\r\n        return jwtDecode(t); // { id, name, email, role, iat, exp }\r\n    } catch (err) {\r\n        console.warn('Failed to decode token', err);\r\n        return null;\r\n    }\r\n}\r\n"],"mappings":"AAAA;AACA,OAAOA,SAAS,MAAM,YAAY;AAElC,MAAMC,SAAS,GAAG,UAAU;AAE5B,OAAO,SAASC,QAAQA,CAACC,KAAK,EAAE;EAC5BC,YAAY,CAACC,OAAO,CAACJ,SAAS,EAAEE,KAAK,CAAC;AAC1C;AAEA,OAAO,SAASG,QAAQA,CAAA,EAAG;EACvB,OAAOF,YAAY,CAACG,OAAO,CAACN,SAAS,CAAC;AAC1C;AAEA,OAAO,SAASO,WAAWA,CAAA,EAAG;EAC1BJ,YAAY,CAACK,UAAU,CAACR,SAAS,CAAC;AACtC;AAEA,OAAO,SAASS,gBAAgBA,CAAA,EAAG;EAC/B,MAAMC,CAAC,GAAGL,QAAQ,CAAC,CAAC;EACpB,IAAI,CAACK,CAAC,EAAE,OAAO,IAAI;EACnB,IAAI;IACA,OAAOX,SAAS,CAACW,CAAC,CAAC,CAAC,CAAC;EACzB,CAAC,CAAC,OAAOC,GAAG,EAAE;IACVC,OAAO,CAACC,IAAI,CAAC,wBAAwB,EAAEF,GAAG,CAAC;IAC3C,OAAO,IAAI;EACf;AACJ","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}